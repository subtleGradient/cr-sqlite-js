# Simple Dockerfile that uses pre-built assets
FROM oven/bun:1.2.19-alpine

WORKDIR /app

# Copy the pre-built Expo web assets
COPY demos/expo-crsql-demo/build /app

# Install minimal runtime dependencies
RUN apk add --no-cache tini

EXPOSE 3000

HEALTHCHECK --interval=10s --timeout=2s --start-period=10s --retries=6 \
  CMD wget -qO- http://127.0.0.1:3000/up || exit 1

ENTRYPOINT ["/sbin/tini", "--"]
CMD ["bun", "server.js"]