use flake

# Project-specific environment variables
export PROJECT_ROOT="$PWD"

# Node.js optimizations for monorepo builds
export NODE_OPTIONS="--max-old-space-size=4096"

# Add local node_modules/.bin to PATH
PATH_add "$PWD/node_modules/.bin"
PATH_add "$PWD/packages/*/node_modules/.bin"

# Cypress configuration
export CYPRESS_INSTALL_BINARY=0

# Build cache directory
export BUILD_CACHE_DIR="$PWD/.cache"

# Enable colorized output
export FORCE_COLOR=1

# Rust toolchain
export RUSTFLAGS="-C target-cpu=native"

# Watch for changes to reload
watch_file flake.nix
watch_file flake.lock